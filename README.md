# 学习Python

> 学习了崔庆才老师的爬虫课程中的免费的三个实战课程，这个是爬取猫眼电影榜单的前一百个电影的名字、演员、图片、评分、上映时间等的内容

## 初学
由于是初学，所以基本是按照老师的代码自己敲，在实践中慢慢了解怎么定义一个函数，怎么调用，怎么启动，以及多线程等。

初学的最大问题在于，很多时候老师信手拈来的库，我却要搞半天来安装——而有的时候是我弄半天安装不上，报错，
最后是本来就以及包含了这个库只是我错误输入了大小写而已。

## 猫眼榜单的爬取

- 首先当然是分析网页，分析请求参数，分析返回代码
- requests的get方法来做请求
- 正则表达式来提取所需要的信息，`.*?`匹配任意字符，`(.*?)`是需要提取的字符，同时提取的内容为一个字符串数组，用[0]-[?]来获取提取到的内容
```
   pattern = re.compile('<dd>.*?board-index.*?>(\d*)</i>.*?data-src="(.*?)".*?name"><a'
                         +'.*?>(.*?)</a>.*?star">(.*?)</p>.*?releasetime">(.*?)</p>'
                          +'.*?integer">(.*?)</i>.*?fraction">(.*?)</i>.*?</dd>',re.S)
    items = re.findall(pattern,html)
```
- 把内容写入txt文件，with open来创建并打开`with open('result.txt', 'a', encoding='utf-8') as f:`，指定编码方式
```
 f.write(json.dumps(content,ensure_ascii=False)+'\n')
        f.close()
```
- 创建进程池，采用多线程来爬取，用到的`multiprocessing`中的`Pool`方法
```
pool = Pool()
    pool.map(main, [i*10 for i in range(10)])
    pool.close()
    pool.join()

```

## 心得

1. 正则表达式虽然很难看，但是理解了之后也好写，重点是真的很强大，目前也就知道.*?这个牛逼的组合
2. 因为汉字编码的问题，所以从Python2.7转到了Python3.6，明天再写个文章说说这个Python3.6的安装问
3. 目前还存在爬取的内容在写入文件的时候并不是按照1-100的顺序来的
